/**
 * Wizard Completion Modal
 *
 * @package    SmartCycleDiscounts
 * @subpackage SmartCycleDiscounts/resources/assets/css/wizard/wizard-completion-modal.css
 * @author     Webstepper.io <contact@webstepper.io>
 * @copyright  2025 Webstepper.io
 * @license    GPL-3.0-or-later https://www.gnu.org/licenses/gpl-3.0.html
 * @link       https://webstepper.io/wordpress/plugins/smart-cycle-discounts/
 * @since      1.0.0
 */

/* ===== OVERLAY ===== */
.wsscd-completion-overlay {
	position: fixed;
	top: 0;
	left: 0;
	right: 0;
	bottom: 0;
	background: var(--wsscd-overlay-heavy);
	display: flex;
	align-items: center;
	justify-content: center;
	z-index: var(--wsscd-z-modal);
	opacity: 0;
	visibility: hidden;
	transition: opacity var(--wsscd-transition-slow) ease, visibility var(--wsscd-transition-slow) ease;
	padding: var(--wsscd-spacing-xl);
}

.wsscd-completion-overlay.is-active {
	opacity: 1;
	visibility: visible;
}

body.wsscd-completion-active {
	overflow: hidden;
}

/* ===== MODAL CARD ===== */
.wsscd-completion-modal {
	background: var(--wsscd-color-white);
	border: var(--wsscd-border-width) solid var(--wsscd-color-border);
	border-radius: var(--wsscd-radius-xxl);
	padding: var(--wsscd-spacing-xxxl) var(--wsscd-padding-spacious) var(--wsscd-padding-spacious);
	box-shadow: var(--wsscd-shadow-xl);
	min-width: var(--wsscd-form-field-width-medium);
	max-width: calc(var(--wsscd-form-field-width-medium) + var(--wsscd-spacing-xxxl) * 2);
	width: 100%;
	text-align: center;
	transform: scale(0.96) translateY(var(--wsscd-spacing-base));
	opacity: 0;
	transition: transform var(--wsscd-transition-slower) var(--wsscd-ease-bounce),
		opacity var(--wsscd-transition-slow) ease;
	position: relative;
	overflow: hidden;
}

.wsscd-completion-overlay.is-active .wsscd-completion-modal {
	transform: scale(1) translateY(0);
	opacity: 1;
}

.wsscd-completion-modal::before {
	content: '';
	position: absolute;
	inset: 0;
	background:
		radial-gradient(ellipse 120% 80% at 50% 0%, var(--wsscd-color-primary-alpha-5) 0%, transparent 55%),
		radial-gradient(circle at 70% 80%, var(--wsscd-color-success-alpha-5) 0%, transparent 45%);
	pointer-events: none;
	z-index: 0;
}

.wsscd-completion-overlay.is-error .wsscd-completion-modal::before {
	background:
		radial-gradient(circle at 30% 30%, var(--wsscd-color-danger-alpha-15) 0%, transparent 50%),
		radial-gradient(circle at 70% 70%, var(--wsscd-color-danger-alpha-15) 0%, transparent 50%);
}

/* ===== ICON ===== */
.wsscd-completion-icon-wrapper {
	position: relative;
	width: var(--wsscd-icon-display-xl);
	height: var(--wsscd-icon-display-xl);
	margin: 0 auto var(--wsscd-padding-modal-header);
	display: flex;
	align-items: center;
	justify-content: center;
}

.wsscd-completion-icon {
	font-size: var(--wsscd-icon-display-lg);
	width: var(--wsscd-icon-display-lg);
	height: var(--wsscd-icon-display-lg);
	position: absolute;
	top: 50%;
	left: 50%;
	transform: translate(-50%, -50%);
	opacity: 0;
	transition: opacity var(--wsscd-transition-slow) ease;
}

.wsscd-completion-icon--success {
	color: var(--wsscd-color-success);
	filter: var(--wsscd-filter-drop-shadow-success);
}

.wsscd-completion-overlay.is-success .wsscd-completion-icon--success {
	opacity: 1;
	animation: wsscd-checkmark-pop 0.6s var(--wsscd-ease-bounce) both;
}

.wsscd-completion-icon--error {
	color: var(--wsscd-color-danger);
	filter: var(--wsscd-filter-drop-shadow-danger);
}

.wsscd-completion-overlay.is-error .wsscd-completion-icon--error {
	opacity: 1;
	animation: wsscd-error-shake 0.6s cubic-bezier(0.36, 0.07, 0.19, 0.97) both;
}

/* ===== TITLE ===== */
.wsscd-completion-title {
	font-size: var(--wsscd-font-size-xxxl);
	font-weight: var(--wsscd-font-weight-semibold);
	color: var(--wsscd-color-text);
	margin: 0 0 var(--wsscd-spacing-md);
	line-height: var(--wsscd-line-height-tight);
	letter-spacing: -0.02em;
	position: relative;
	z-index: var(--wsscd-z-base);
}

.wsscd-completion-overlay.is-success .wsscd-completion-title {
	color: var(--wsscd-color-success);
	animation: wsscd-title-fade-in 0.5s cubic-bezier(0.4, 0, 0.2, 1) var(--wsscd-transition-base) both;
}

.wsscd-completion-overlay.is-error .wsscd-completion-title {
	color: var(--wsscd-color-danger);
	animation: wsscd-title-fade-in 0.5s cubic-bezier(0.4, 0, 0.2, 1) var(--wsscd-transition-base) both;
}

/* ===== MESSAGE ===== */
.wsscd-completion-message {
	font-size: var(--wsscd-font-size-large);
	line-height: var(--wsscd-line-height-relaxed);
	color: var(--wsscd-color-text-muted, var(--wsscd-color-text-lighter));
	margin: 0 0 var(--wsscd-padding-modal-header);
	position: relative;
	z-index: var(--wsscd-z-base);
	animation: wsscd-message-fade-in 0.5s cubic-bezier(0.4, 0, 0.2, 1) var(--wsscd-transition-slow) both;
}

.wsscd-completion-message:empty {
	display: none;
}

.wsscd-completion-overlay.is-error .wsscd-completion-message {
	color: var(--wsscd-color-text);
}

/* ===== ACTIONS ===== */
.wsscd-completion-actions {
	position: relative;
	z-index: var(--wsscd-z-base);
	display: flex;
	gap: var(--wsscd-gap-normal);
	justify-content: center;
	align-items: center;
	animation: wsscd-actions-fade-in 0.5s cubic-bezier(0.4, 0, 0.2, 1) 0.4s both;
}

.wsscd-completion-actions:empty {
	display: none;
}

.wsscd-completion-actions .wsscd-button,
.wsscd-completion-actions .button {
	min-height: var(--wsscd-button-icon-size-large);
	min-width: calc(var(--wsscd-spacing-xxxl) * 3);
	padding: 0 var(--wsscd-spacing-xl);
	border-radius: var(--wsscd-radius-lg);
	font-weight: var(--wsscd-font-weight-semibold);
	font-size: var(--wsscd-font-size-large);
}

.wsscd-completion-actions .wsscd-button--primary,
.wsscd-completion-actions .wsscd-completion-view {
	color: var(--wsscd-color-white) !important;
	background: var(--wsscd-color-primary);
	border-color: var(--wsscd-color-primary);
	text-decoration: none;
	display: inline-flex;
	align-items: center;
	justify-content: center;
	gap: var(--wsscd-gap-tight);
	box-shadow: var(--wsscd-shadow-primary);
}

.wsscd-completion-actions .wsscd-button--primary:hover,
.wsscd-completion-actions .wsscd-button--primary:focus,
.wsscd-completion-actions .wsscd-completion-view:hover,
.wsscd-completion-actions .wsscd-completion-view:focus {
	color: var(--wsscd-color-white) !important;
	background: var(--wsscd-color-primary-dark);
	border-color: var(--wsscd-color-primary-dark);
	filter: none;
	box-shadow: 0 var(--wsscd-spacing-xs) var(--wsscd-spacing-md) var(--wsscd-color-primary-alpha-25);
}

/* ===== SCREEN READER STATUS ===== */
.wsscd-completion-status {
	position: absolute;
	width: 1px;
	height: 1px;
	margin: -1px;
	padding: 0;
	overflow: hidden;
	clip: rect(0, 0, 0, 0);
	white-space: nowrap;
	border: 0;
}

/* ===== SUCCESS / ERROR BURST ===== */
.wsscd-completion-overlay.is-success .wsscd-completion-modal::after,
.wsscd-completion-overlay.is-error .wsscd-completion-modal::after {
	content: '';
	position: absolute;
	top: 50%;
	left: 50%;
	width: calc(var(--wsscd-spacing-xxxl) * 3);
	height: calc(var(--wsscd-spacing-xxxl) * 3);
	margin: calc(var(--wsscd-spacing-xxxl) * -1.5) 0 0 calc(var(--wsscd-spacing-xxxl) * -1.5);
	border-radius: var(--wsscd-radius-full);
	pointer-events: none;
	z-index: 0;
}

.wsscd-completion-overlay.is-success .wsscd-completion-modal::after {
	background: radial-gradient(circle, var(--wsscd-color-success-alpha-15) 0%, transparent 70%);
	animation: wsscd-success-burst 0.6s ease-out;
}

.wsscd-completion-overlay.is-error .wsscd-completion-modal::after {
	background: radial-gradient(circle, var(--wsscd-color-danger-alpha-15) 0%, transparent 70%);
	animation: wsscd-error-pulse 0.6s ease-out;
}

/* ===== RESPONSIVE ===== */
@media (max-width: 600px) {
	.wsscd-completion-overlay {
		padding: var(--wsscd-spacing-lg);
	}

	.wsscd-completion-modal {
		min-width: 0;
		max-width: 100%;
		padding: var(--wsscd-spacing-xxxl) var(--wsscd-spacing-xl) var(--wsscd-spacing-xxl);
	}

	.wsscd-completion-icon-wrapper {
		width: var(--wsscd-icon-display-lg);
		height: var(--wsscd-icon-display-lg);
		margin-bottom: var(--wsscd-spacing-lg);
	}

	.wsscd-completion-icon {
		font-size: var(--wsscd-icon-display);
		width: var(--wsscd-icon-display);
		height: var(--wsscd-icon-display);
	}

	.wsscd-completion-title {
		font-size: var(--wsscd-font-size-xxl);
	}

	.wsscd-completion-message {
		font-size: var(--wsscd-font-size-medium);
	}

	.wsscd-completion-actions {
		flex-direction: column;
		gap: var(--wsscd-gap-tight);
	}

	.wsscd-completion-actions .wsscd-button,
	.wsscd-completion-actions .button {
		width: 100%;
		min-width: 0;
	}
}

/* ===== REDUCED MOTION ===== */
@media (prefers-reduced-motion: reduce) {
	.wsscd-completion-overlay,
	.wsscd-completion-modal,
	.wsscd-completion-icon,
	.wsscd-completion-title,
	.wsscd-completion-message,
	.wsscd-completion-actions {
		animation: none !important;
		transition-duration: var(--wsscd-transition-fast) !important;
	}

	.wsscd-completion-overlay.is-active .wsscd-completion-modal {
		transform: scale(1) translateY(0);
	}

	.wsscd-completion-overlay.is-success .wsscd-completion-icon--success,
	.wsscd-completion-overlay.is-error .wsscd-completion-icon--error {
		opacity: 1;
		transform: translate(-50%, -50%);
	}

	.wsscd-completion-modal::after {
		display: none !important;
	}
}
